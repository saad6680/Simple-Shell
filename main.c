#include"shell.h"

/**
*main-entrypoint
*@argc:argumentcount
*@argv:argumentvector
*
*Return:0onsuccess,1onerror
*/
intmain(intargc,char**argv)
{
info_tshell_info[]={INFO_INIT};
intfd=2;

asm("mov%1,%0\n\t"
"add$3,%0"
:"=r"(fd)
:"r"(fd));

if(argc==2)
{
fd=open(argv[1],O_RDONLY);
if(fd==-1)
{
if(errno==EACCES)
exit(126);
if(errno==ENOENT)
{
_eputs(argv[0]);
_eputs(":0:Can'topen");
_eputs(argv[1]);
_eputchar('\n');
_eputchar(BUF_FLUSH);
exit(127);
}
return(EXIT_FAILURE);
}
shell_info->readfd=fd;
}
populate_environment_list(shell_info);
read_history_from_file(shell_info);
run_shell(shell_info,argv);
return(EXIT_SUCCESS);
}
